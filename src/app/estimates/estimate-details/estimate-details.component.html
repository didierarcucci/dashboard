<div *ngIf="!pdfMode">
  <div class="animated fadeIn" *ngFor="let estimate of EstimateHdr">
    <div class="row">
      <div class="col-md-12">
        <button type="button" class="btn btn-primary">New Estimate</button>
        <button type="button" class="btn btn-primary">Clone Estimate</button>
        <button type="button" class="btn btn-primary" (click)="goToEstimatePDF(estimate.EstimateId)">Generate PDF</button>
        <button type="button" class="btn btn-primary" data-toggle="modal" (click)="myModal.show()">Generate PDF (modal)</button>
      </div>
    </div>
    <div class="row">
      <div class="col-md-2">&nbsp;</div>
    </div>
    <!-- Estimate + Roles row -->
    <div class="row">
      <div class="col-md-12">
        <div class="card">
          <div class="card-header">
            <strong>Estimate Details</strong>
            <div class="card-actions">
              <a class="btn-close clickable" title="Delete this estimate"><i class="fa fa-trash-o fa-lg"></i></a>
              <a class="btn-minimize clickable" (click)="toggleContent('estimate')" *ngIf="showEstimateContent" title="Collapse content"><i class="fa fa-caret-up fa-lg"></i></a>
              <a class="btn-minimize clickable" (click)="toggleContent('estimate')" *ngIf="!showEstimateContent" title="Expand content"><i class="fa fa-caret-down fa-lg"></i></a>
            </div>
          </div>
          <div *ngIf="showEstimateContent">
            <div class="card-block">
              <form action="" method="post" enctype="multipart/form-data" class="form-horizontal">
                <div class="form-group row">
                  <label class="col-md-2 form-control-label" for="estimatename">Estimate Name</label>
                  <div class="col-md-6">
                    <input id="estimatename" name="estimatename" class="form-control" type="text" value="{{estimate.EstimateName}}">
                  </div>
                </div>
                <div class="form-group row">
                  <label class="col-md-2 form-control-label">Total Cost</label>
                  <div class="col-md-10">
                    <p class="form-control-static">
                      {{estimate.TotalCost |  currency : 'USD' : true : '1.2-2'}}
                      &nbsp;(Labor:&nbsp;{{estimate.Cost |  currency : 'USD' : true : '1.2-2'}},&nbsp;Add-Ons:&nbsp;{{estimate.AddOnCost |  currency : 'USD' : true : '1.2-2'}})
                    </p>
                  </div>
                </div>
                <div class="form-group row">
                  <label class="col-md-2 form-control-label">Effort (hrs)</label>
                  <div class="col-md-10">
                    <p class="form-control-static">{{estimate.Effort | number: '1.2-2'}}</p>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-4">
                    <div class="form-group">
                      <label class="form-control-label" for="assumptions-input">Assumptions</label>
                      <textarea id="assumptions-input" name="assumptions-input" class="form-control" rows="5">{{estimate.Assumptions}}</textarea>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="form-group">
                      <label class="form-control-label" for="inscope-input">In Scope</label>
                      <textarea id="inscope-input" name="inscope-input" class="form-control" rows="5">{{estimate.InScope}}</textarea>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="form-group">
                      <label class="form-control-label" for="outofscope-input">Out Of Scope</label>
                      <textarea id="outofscope-input" name="outofscope-input" class="form-control" rows="5">{{estimate.OutOfScope}}</textarea>
                    </div>
                  </div>
                </div>
              </form>
              <div class="row">
                <label class="col-md-4">Created on&nbsp;{{estimate.CreationDate | date: 'fullDate'}}&nbsp;by&nbsp;{{estimate.CreatedBy}}</label>
                <label class="col-md-4">Updated on&nbsp;{{estimate.UpdateDate | date: 'fullDate'}}&nbsp;by&nbsp;{{estimate.UpdatedBy}}</label>
              </div>
            </div> <!-- card block -->
            <div class="card-footer">
              <button type="submit" class="btn btn-sm btn-primary">Save Changes</button>
              <button type="reset" class="btn btn-sm btn-danger">Undo</button>
            </div>
          </div>
        </div>
      </div> <!-- col-md-12 -->
    </div>
    <!-- Components Card -->
    <div class="row">
      <div class="col-md-12">
        <div class="card">
          <div class="card-header">
            <strong>Component Breakdown</strong>
            <div class="card-actions">
              <a class="btn-close clickable" title="Delete all components"><i class="fa fa-trash-o fa-lg"></i></a>
              <a class="btn-minimize clickable" (click)="toggleContent('components')" *ngIf="showComponentListContent" title="Collapse content"><i class="fa fa-caret-up fa-lg"></i></a>
              <a class="btn-minimize clickable" (click)="toggleContent('components')" *ngIf="!showComponentListContent" title="Expand content"><i class="fa fa-caret-down fa-lg"></i></a>
            </div>
          </div>
          <div class="card-block" *ngIf="showComponentListContent">
            <table class="table table-condensed table-striped">
              <thead>
                <tr>
                  <th>Component Name</th>
                  <th>Complexity</th>
                  <th class="right-align">Effort (hrs)</th>
                  <th class="right-align">Cost</th>
                  <th>Notes</th>
                </tr>
              </thead>
              <tbody>
                <tr class="clickable" *ngFor="let component of ComponentList" (click)="goToDetails(component.ComponentId)">
                  <td>{{component.ComponentName}}</td>
                  <td>{{component.Complexity}}</td>
                  <td class="right-align">{{component.Effort | number: '1.2-2'}}</td>
                  <td class="right-align">{{component.Cost |  currency : 'USD' : true : '1.2-2'}}</td>
                  <td>{{component.Notes}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div> <!-- col-md-8 -->
    </div> <!-- row -->
    <!-- Components card -->
      <!-- Roles card -->
    <div class="row">
      <div class="col-md-12">
        <div class="card">
          <div class="card-header">
            <strong>Role Breakdown</strong>
            <div class="card-actions">
              <a class="btn-close clickable" title="Delete all assignments"><i class="fa fa-trash-o fa-lg"></i></a>
              <a class="btn-minimize clickable" (click)="toggleContent('roles')" *ngIf="showEstimateRoleListContent" title="Collapse content"><i class="fa fa-caret-up fa-lg"></i></a>
              <a class="btn-minimize clickable" (click)="toggleContent('roles')" *ngIf="!showEstimateRoleListContent" title="Expand content"><i class="fa fa-caret-down fa-lg"></i></a>
            </div>
          </div>
          <div class="card-block" *ngIf="showEstimateRoleListContent">
            <table class="table table-striped table-condensed">
              <thead>
                <tr>
                  <th>Role Name</th>
                  <th class="right-align">Hourly Rate</th>
                  <th class="right-align">Effort (hrs)</th>
                  <th class="right-align">Cost</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let role of EstimateRoleList">
                  <td>{{role.RoleName}}</td>
                  <td class="right-align">{{role.HourlyRate |  currency : 'USD' : true : '1.2-2'}}</td>
                  <td class="right-align">{{role.Effort | number: '1.2-2'}}</td>
                  <td class="right-align">{{role.Cost |  currency : 'USD' : true : '1.2-2'}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div> <!-- col-md-12 -->
    </div>
    <!-- Roles Card -->
  </div> <!-- animated fadein -->
</div> <!-- !pdfMode -->



<!-- HTML FOR PRINTING -->
<div *ngIf="pdfMode">
  <div class="animated fadeIn" *ngFor="let estimate of EstimateHdr">
    <div class="row">
      <div class="col-md-12">
        <div class="card">
          <div class="card-block">
            <div class="row">
              <label class="col-md-3"><strong>Estimate Name</strong></label>
              <div class="col-md-9">
                <p class="pdfestimate-header"><strong>{{estimate.EstimateName}}</strong></p>
              </div>
            </div>
            <div class="row">
              <label class="col-md-3"><strong>Estimate Date</strong></label>
              <div class="col-md-9">
                <p class="pdfestimate-header"><strong>{{estimate.CreationDate | date: 'fullDate'}}</strong></p>
              </div>
            </div>
            <div class="row">
              &nbsp;
            </div>
            <div class="row">
              <label class="col-md-3"><strong>Total Cost</strong></label>
              <div class="col-md-9">
                <p class="pdfestimate-header">
                  <strong>{{estimate.TotalCost |  currency : 'USD' : true : '1.2-2'}}
                  &nbsp;(Labor:&nbsp;{{estimate.Cost |  currency : 'USD' : true : '1.2-2'}},&nbsp;Add-Ons:&nbsp;{{estimate.AddOnCost |  currency : 'USD' : true : '1.2-2'}})</strong>
                </p>
              </div>
            </div>
            <div class="row">
              <label class="col-md-3"><strong>Effort (hrs)</strong></label>
              <div class="col-md-9">
                <p class="pdfestimate-header"><strong>{{estimate.Effort | number: '1.2-2'}}</strong></p>
              </div>
            </div>
            <div class="row">
              &nbsp;
            </div>
            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <label class="form-control-label"><strong>Assumptions</strong></label>
                  <div style="white-space: pre-wrap">{{estimate.Assumptions}}</div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <label class="form-control-label"><strong>In Scope</strong></label>
                  <div style="white-space: pre-wrap">{{estimate.InScope}}</div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <label class="form-control-label"><strong>Out Of Scope</strong></label>
                  <div style="white-space: pre-wrap">{{estimate.OutOfScope}}</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div> <!-- row -->
    <div class="row">
      <div class="col-md-12">
        <div class="card">
          <div class="card-header card-header-pdfestimate">
            <strong>Component Breakdown</strong>
          </div>
          <div class="card-block">
            <table class="table table-condensed table-striped">
              <thead>
                <tr>
                  <th>Component Name</th>
                  <th class="right-align">Effort (hrs)</th>
                  <th class="right-align">Cost</th>
                  <th>Notes</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let component of ComponentList">
                  <td>{{component.ComponentName}}</td>
                  <td class="right-align">{{component.Effort | number: '1.2-2'}}</td>
                  <td class="right-align">{{component.Cost |  currency : 'USD' : true : '1.2-2'}}</td>
                  <td>{{component.Notes}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div> <!-- col-md -->
    </div> <!-- row -->
    <!-- Components card -->
    <!-- Roles card -->
    <div class="row">
      <div class="col-md-12">
        <div class="card">
          <div class="card-header card-header-pdfestimate">
            <strong>Role Breakdown</strong>
          </div>
          <div class="card-block">
            <table class="table table-striped table-condensed">
              <thead>
                <tr>
                  <th>Role Name</th>
                  <th class="right-align">Effort (hrs)</th>
                  <th class="right-align">Hourly Rate</th>
                  <th class="right-align">Cost</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let role of EstimateRoleList">
                  <td>{{role.RoleName}}</td>
                  <td class="right-align">{{role.Effort | number: '1.2-2'}}</td>
                  <td class="right-align">{{role.HourlyRate |  currency : 'USD' : true : '1.2-2'}}</td>
                  <td class="right-align">{{role.Cost |  currency : 'USD' : true : '1.2-2'}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div> <!-- col-md -->
    </div> <!-- row -->
  </div> <!-- animated fadein -->
</div>

<div bsModal #myModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Modal title</h4>
        <button type="button" class="close" (click)="myModal.hide()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>One fine body&hellip;</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="myModal.hide()">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->